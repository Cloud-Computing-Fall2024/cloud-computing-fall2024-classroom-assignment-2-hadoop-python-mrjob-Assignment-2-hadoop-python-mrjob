# **Assignment 2: Advanced Python MapReduce Using Hadoop Streaming and `mrjob`**

## **Overview**

This assignment involves using **Python** and the **`mrjob` framework** to perform MapReduce tasks on an e-commerce transaction dataset. The goal is to analyze the dataset and compute key metrics, such as the most profitable products, the most active hour of the day, and the total sales and average revenue per product category.

---

## **Dataset**

The dataset is named `ecommerce_transactions.csv`, and each row represents a transaction in the e-commerce platform.

### **Dataset Columns**:
- **TransactionID**: The unique identifier for each transaction.
- **ProductCategory**: The category of the product.
- **ProductID**: The unique identifier of the product.
- **QuantitySold**: The number of units sold in the transaction.
- **RevenueGenerated**: The revenue generated by this transaction.
- **TransactionTimestamp**: The timestamp of the transaction.

### **Sample Data**:
```csv
TransactionID,ProductCategory,ProductID,QuantitySold,RevenueGenerated,TransactionTimestamp
1,Electronics,1001,2,500.00,2023-07-01 10:34:22
2,Furniture,2003,1,700.00,2023-07-01 11:12:55
3,Clothing,3005,3,150.00,2023-07-01 11:56:13
4,Electronics,1002,5,1200.00,2023-07-01 12:45:09
```

---

## **Tasks**

### **Task 1: Most Profitable Products**

- **Objective**: Compute the top 5 most profitable products based on the total revenue generated across all transactions.
- **Mapper**: Emit the `ProductID` and `RevenueGenerated` for each transaction.
- **Reducer**: Aggregate the total revenue for each product and rank the top 5 products.
- **Note**: You may need to use `MRStep` to chain multiple reducers for this task.

### **Task 2: Most Active Hour of the Day**

- **Objective**: Calculate the hour of the day with the most transactions across all product categories.
- **Mapper**: Extract the hour from the `TransactionTimestamp` and emit the hour.
- **Reducer**: Sum the number of transactions for each hour and output the hour with the highest transaction count.

### **Task 3: Total Sales and Average Revenue per Product Category**

- **Objective**: Compute the total quantity sold and average revenue per product category.
- **Mapper**: Emit the `ProductCategory`, `QuantitySold`, and `RevenueGenerated` for each transaction.
- **Reducer**: Aggregate the total quantity sold and calculate the average revenue per product category.

---

## **Setup and Execution**

### **1. Clone the Repository**

First, fork the assignment repository from GitHub Classroom, then clone it to your local machine or just create a github codespaces instance.

### **2. Ensure the Dataset is Available**

Ensure the `ecommerce_transactions.csv` file is placed inside the `input/` directory of your repository.

```bash
input/ecommerce_transactions.csv
```

### **3. Install `mrjob` Framework**

If you haven't installed `mrjob` already, you can install it using `pip`:

```bash
pip install mrjob
```

---

### **4. Run the Tasks**

You will be running each of the three tasks separately using the `mrjob` framework.

#### **Task 1: Most Profitable Products**

To run the first task, execute the following command:

```bash
python task1_most_profitable_products.py input/ecommerce_transactions.csv
```

This will process the dataset and output the top 5 most profitable products based on the total revenue generated.

#### **Task 2: Most Active Hour of the Day**

To run the second task, execute the following command:

```bash
python task2_most_active_hour.py input/ecommerce_transactions.csv
```

This will calculate the hour of the day with the highest transaction count across all product categories.

#### **Task 3: Total Sales and Average Revenue per Product Category**

To run the third task, execute the following command:

```bash
python task3_sales_avg_revenue.py input/ecommerce_transactions.csv
```

This will compute the total quantity sold and average revenue for each product category.

---

### **5. View the Output**

Each task will output the results in the terminal. You can redirect the output to a file if needed:

```bash
python task1_most_profitable_products.py input/ecommerce_transactions.csv > output/task1_output.txt
```

Similarly, for Task 2 and Task 3:

```bash
python task2_most_active_hour.py input/ecommerce_transactions.csv > output/task2_output.txt
python task3_sales_avg_revenue.py input/ecommerce_transactions.csv > output/task3_output.txt
```

---

### **6. Submit the Results**

1. **Push your code and output files to GitHub:**

```bash
git add .
git commit -m "Completed Assignment 2"
git push origin main
```

2. **Submit your assignment** by sharing the GitHub repository link on GitHub Classroom.

---

## **Grading Criteria**

1. **Correctness of Python MapReduce Jobs**: Ensure that the Python scripts correctly handle all three tasks.
2. **Proper Use of `mrjob`**: Ensure that your solution demonstrates correct usage of the `mrjob` framework, including multiple steps where necessary.
3. **Submission of Code and Output**: All required files should be submitted via GitHub Classroom, including the input/output files and the Python scripts.
4. **Clarity of Report**: Provide a concise one-page report summarizing your setup, challenges faced, and observations.

---

## **Helpful Resources**

- **mrjob Documentation**: [https://mrjob.readthedocs.io/en/latest/](https://mrjob.readthedocs.io/en/latest/)
- **MapReduce Basics**: Make sure you understand how mappers and reducers work in the MapReduce framework.

---

If you have any questions or run into issues, feel free to reach out!

---